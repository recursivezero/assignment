---
import Header from "./Header.astro";
import LightDarkMode from "../components/lightDarkMode.astro";
---

<style>
  @font-face 
  {
      font-family: gilroy;
      src: url(/gilroy/Gilroy-Regular.ttf);
  }

  div #navbar
  {
    background-color: #000;
  }

  #navbar
  {
    background: none;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin-bottom: -1.8em;
    transition: background-color 0.3s, color 0.3s; /* Smooth transition */
  }

  #languageSwitcher
  {
    padding: 0.5em;
    background: none;
    border-radius: 10px;
    border: none;
    background-color: #000;
    color: #ffffff;
    box-shadow: rgba(255, 255, 255, 0.886) 0px 3px 8px;
  }



  :root {
    --bg-color: white;
    --text-color: black;
  }
  [data-theme="dark"] {
    --bg-color: black;
    --text-color: white;
  }

  body {
    background-color: var(--bg-color);
    color: var(--text-color);
    transition: background-color 0.3s, color 0.3s;
  }

  #theme-toggle {
    cursor: pointer;
    padding: 0.5em;
    background-color: var(--text-color);
    color: var(--bg-color);
    border: none;
    border-radius: 50%;
    font-size: 1em;
  }

  #i18nBtn
  {
    text-decoration: none;
  }
  
  a
  {
    color: rgb(255, 190, 69);
    text-decoration: none;
    border: 1px solid #fff;
    padding: 0.5em;
    border-radius: 10px;
    box-shadow: rgba(255, 255, 255, 0.886) 0px 3px 8px;
  }

</style>

<nav>
  <div id="navbar">
    <Header />
    <!-- Language Selector -->
    <select id="languageSwitcher">
      <option value="en">English</option>
      <option value="hindi">Hindi</option>
    </select>
    <LightDarkMode />
    <a id="i18nBtn" href="/blog/" target="_blank">i18n Blog</a>
  </div>
</nav>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const themeToggle = document.getElementById("theme-toggle");
    const languageSwitcher = document.getElementById("languageSwitcher");

    // Theme toggle logic
    const savedTheme = localStorage.getItem("theme") || "light";
    document.documentElement.setAttribute("data-theme", savedTheme);
    themeToggle.addEventListener("click", () => {
      const currentTheme = document.documentElement.getAttribute("data-theme");
      const newTheme = currentTheme === "light" ? "dark" : "light";
      document.documentElement.setAttribute("data-theme", newTheme);
      localStorage.setItem("theme", newTheme);
    });

    // Language switcher logic
    const savedLanguage = localStorage.getItem("language") || "en";
    languageSwitcher.value = savedLanguage;
    languageSwitcher.addEventListener("change", (event) => {
      const selectedLanguage = event.target.value;
      localStorage.setItem("language", selectedLanguage);
      const currentUrl = new URL(window.location.href);
      currentUrl.searchParams.set("lang", selectedLanguage);
      window.location.href = currentUrl.toString();
    });
  });
</script>



